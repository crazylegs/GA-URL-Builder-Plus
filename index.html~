<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>GA URL Builder Plus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
 
            <!--link rel="stylesheet/less" href="less/bootstrap.less" type="text/css" /-->
            <!--link rel="stylesheet/less" href="less/responsive.less" type="text/css" /-->
            <!--script src="js/less-1.3.3.min.js"></script-->
            <!--append ‘#!watch’ to the browser URL, then refresh the page. -->
           
            <link href="http://minikomi.github.io/Bootstrap-Form-Builder/assets/css/lib/bootstrap.min.css" rel="stylesheet">
            <link href="http://minikomi.github.io/Bootstrap-Form-Builder/assets/css/lib/bootstrap-responsive.min.css" rel="stylesheet">
            <script type="text/javascript" src="js/jquery.min.js"></script>
            <script type="text/javascript" src="js/bootstrap.min.js"></script>
            <script type="text/javascript" src="js/scripts.js"></script>
 
 
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
  <![endif]-->
 
  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="img/favicon.png">
 
<!-- Change source and medium here -->
<!-- Use the same names as you add in the dropdown coded further down -->
<!--
 
Example
 
  if                    (mysource == "foo" || mysource == "bar"){document.ctm.utm_medium.value = "foobar";}   
  else if (mysource == "x" || mysource == "y"){document.ctm.utm_medium.value = "z";}      
 
-->
           
                        <script type="text/javascript"><!--
 
                        function setmedium(source) {
 
         mysource = source;
 
if(mysource == "FacebookAd" || mysource == "twitter" || mysource == "youtube" || mysource == "flickr" || mysource == "pinterest" || mysource == "FacebookPost"){document.ctm.utm_medium.value = "social";}
else if (mysource == "email_signature" || mysource == "general_enews" || mysource == "single_enews" || mysource == "email_signature"){
 
         document.ctm.utm_medium.value = "email";
 
}               else if (mysource == "poster" || mysource == "QRcode" ){
 
         document.ctm.utm_medium.value = "outdoor";
 
}                      else if (mysource == "banner" || mysource == "video" || mysource == "skyscraper" || mysource == "leaderboard"){
 
         document.ctm.utm_medium.value = "display";
 
}    
 
}
 
                        </script>
 
 
<!-- add your bit.ly username & api key here. NB you need the old api key -->
 
<script type="text/javascript">
$(document).ready(function()
{
 function bit_url(url)
{
var url=url;
var username="gaurlplus";
var key="";
$.ajax({
url:"http://api.bit.ly/v3/shorten",
data:{longUrl:url,apiKey:key,login:username},
dataType:"jsonp",
success:function(v)
{
var bit_url=v.data.url;
$("#result").html('<a href="'+bit_url+'" target="_blank">'+bit_url+'</a>');
}
});
}
 
 
$("#url").focus();
 
$("#short").click(function()
{
var url=$("#url").val();
var urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
var urltest=urlRegex.test(url);
if(urltest)
{
$("#result").show();
bit_url(url);
$("#url").focus();
}
else
{
alert("Bad URL");
}
return false;
});
 
 
});
</script>
                       
</head>
 
<body>
<div class="container" style="max-width:500px">
            <div class="row clearfix">
                        <div class="col-md-2 column">
                        </div>
                        <div class="col-md-6 column">
 
                                    <div class="page-header">
                                                <h1>
                                                            GA URL Builder Plus
                                                </h1>
                                    </div>
                                   
<strong>Simplified Google Analytics campaign parameter URL tracking builder</strong>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseintro">
          <small>more info +</small>
        </a>
      </h4>
    </div>
    <div id="collapseintro" class="panel-collapse collapse">
            <p>A simplified URL parameter builder for use in orgs with multiple staff posting links.
            </p>This tool has been designed to let multiple users across an organisation add Google Analytics URL tracking to their links in a consistent way that doesn't require indepth knowledge of Google Analyics. Resulting in clean crisp campaign data in Google Analytics and people not having to worry about whether something is a 'medium' or a 'source'. It's a suped up but simplified version of <a href="https://support.google.com/analytics/answer/1033867?hl=en-GB" target="_blank">this</a>. As a bonus it's got built in Bit.ly shortening
                        
                        <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapsewhylinks">
          <small>Why track links?</small>
        </a>
      </h4>
           <div id="collapsewhylinks" class="panel-collapse collapse">By tracking links that we can find out how the people who clicked the link used our website. For eaxmple: How many people clicked, what time they clicked, whether they went on to transact on our website etc... For more information check one of these blogs: <a href="http://www.orbitmedia.com/blog/google-analytics-url-builder/">1</a> <a href="<a href="http://sproutsocial.com/insights/google-analytics/">2</a></div>
                        <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseinst">
          <small>Setup instructions</small>
        </a>
      </h4>
 
    <div id="collapseinst" class="panel-collapse collapse">
<ul>
<li>
Sign up to bit.ly. In the settings section copy the legacy api key and your user name. Open this file (index.html) in a text editor and find and replace the bit.ly account listed with your own account.<br><br>
<div class="well well-sm">
$(document).ready(function()<br>
{<br>
 function bit_url(url)<br>
{<br>
var url=url;<br><br>
<strong>var username="";<br>
var key="";</strong><br><br>
$.ajax({<br>
url:"http://api.bit.ly/v3/shorten",<br>
data:{longUrl:url,apiKey:key,login:username},<br>
dataType:"jsonp",<br>
success:function(v)<br>
{<br>
var bit_url=v.data.url;<br>
$("#result").html('<a href="'+bit_url+'" target="_blank">'+bit_url+'</a>');<br>
}<br>
});<br>
</div>
</li>
<li>
Add your source/medium combinations to the placement dropdown by finding this section of code in this file. The optgroup label don't affect any functionality but make it look a bit tidier and help reinforce the link between source and medium.<br><br>
<div class="well well-sm">

    &#x3C;select id=&#x22;utm_source&#x22; name=&#x22;utm_source&#x22; class=&#x22;input-xlarge&#x22; onchange=&#x22;setmedium(this.value); javascript: changeSubcat(this.options[this.selectedIndex].value);&#x22;&#x3E;<br><br>
            &#x3C;option&#x3E;-&#x3C;/option&#x3E;<br>
            &#x3C;optgroup label=&#x22;Social&#x22;&#x3E;<br>
            &#x3C;option value=&#x22;FacebookPost&#x22;&#x3E;Facebook Post&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;FacebookAd&#x22;&#x3E;Facebook Ad&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;twitter&#x22;&#x3E;Twitter&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;youtube&#x22;&#x3E;YouTube&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;pinterest&#x22;&#x3E;Pinterest&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;flickr&#x22;&#x3E;Flickr&#x3C;/option&#x3E;<br><br>
            &#x3C;optgroup label=&#x22;Email&#x22;&#x3E;<br>
            &#x3C;option value=&#x22;email_signature&#x22;&#x3E;Email signature&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;general_enews&#x22;&#x3E;Monthly Enews&#x3C;/option&#x3E;<br>
            &#x3C;option value=&#x22;single_enews&#x22;&#x3E;Single Enews&#x3C;/option&#x3E;<br>
            &#x3C;optgroup label=&#x22;Display&#x22;&#x3E;<br>
     &#x3C;option value=&#x22;Banner&#x22;&#x3E;Banner&#x3C;/option&#x3E;<br><br>
            &#x3C;optgroup label=&#x22;Outdoor&#x22;&#x3E;<br>
     &#x3C;option value=&#x22;Poster&#x22;&#x3E;Poster&#x3C;/option&#x3E;<br><br>
    &#x3C;/select&#x3E;<br>

<br>
</div>
</li>
<li>
Find this section of code and create any new rules you need. You'll need to add in any new sources you've added to the placement dropdown and add which medium it should select behind the scenes. In this case FacebookAd, twitter, youtube etc.. are sources and match the placement dropdown values, if they are selected 'social' will be added as the medium. "||" means OR. I.E. If you select FacebookAd or twitter or youtube as the source then the medium is social.<br><br>
<div class="well well-sm">
&#x3C;script type=&#x22;text/javascript&#x22;&#x3E;<br>
    &#x3C;!--<br>
<br>
    function setmedium(source) {<br>
<br>
        mysource = source;<br>
<br>
        if (mysource == &#x22;<strong>FacebookAd</strong>&#x22; || mysource == &#x22;<strong>twitter</strong>&#x22; || mysource == &#x22;<strong>youtube</strong>&#x22; || mysource == &#x22;<strong>flickr</strong>&#x22; || mysource == &#x22;<strong>pinterest</strong>&#x22; || mysource == &#x22;<strong>FacebookPost</strong>&#x22;) {<br>
            document.ctm.utm_medium.value = &#x22;<strong>social</strong>&#x22;;}<br><br>
         else if (mysource == &#x22;email_signature&#x22; || mysource == &#x22;general_enews&#x22; || mysource == &#x22;single_enews&#x22; || mysource == &#x22;email_signature&#x22;) {<br>
<br>
            document.ctm.utm_medium.value = &#x22;email&#x22;;}<br>
<br>
         else if (mysource == &#x22;newsadvert&#x22; || mysource == &#x22;newsarticle&#x22; || mysource == &#x22;pressrelease&#x22;) {<br>
<br>
            document.ctm.utm_medium.value = &#x22;press&#x22;;}<br>
<br>
         else if (mysource == &#x22;poster&#x22;) {<br>
<br>
            document.ctm.utm_medium.value = &#x22;outdoor&#x22;;}<br>
<br>
    }<br>
&#x3C;/script&#x3E;<br>
</div>

</li>
<li>
Add your campaigns to the campaign dropdown. Update as you get new campaigns<br><br>
<div class="well well-sm">

    &#x3C;select id=&#x22;utm_campaign&#x22; name=&#x22;utm_campaign&#x22; class=&#x22;input-xlarge&#x22;&#x3E;<br>
              &#x3C;option&#x3E;-&#x3C;/option&#x3E;<br>
              &#x3C;option&#x3E;London Marathon&#x3C;/option&#x3E;<br>
              &#x3C;option&#x3E;Research News&#x3C;/option&#x3E;<br>
              &#x3C;option&#x3E;Ice Bucket Challenge&#x3C;/option&#x3E;<br>
              &#x3C;option&#x3E;Our Great Campaign&#x3C;/option&#x3E;<br>
    &#x3C;/select&#x3E;
</div>
</li>
<li>
Host the whole folder on a network drive or on an internal server (the bit.ly api key is stored in the open so you don't want this somewhere publically accessible, the trade off in security makes the tool a more portable and easily editable. We put it on a shared network drive)
</li>  
</ul>
</div>

<div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
          <small>Credits</small>
        </a>
      </h4>
    </div>

<div id="collapseTwo" class="panel-collapse collapse">
<div class="panel-body">
<strong>Built by</strong><br><br>
                     
                       <a href="https://twitter.com/tweetsfromowen">@tweetsfromowen</a> <br><a href="https://twitter.com/james_south">@james_south</a><br><a href="https://twitter.com/thomasmpreston">@thomasmpreston</a><br><br>@<br><br>
                     
                        <img src="http://leukaemialymphomaresearch.org.uk/sites/all/themes/llr/assets/images/site/logo.png"><br><br>&<br><br>
                        <img src="http://www.royalmarsden.org/view.image?Id=1264">
                      
                       </div><br>
                        <strong>Using code examples from</strong><a href="https://support.google.com/analytics/answer/1033867?hl=en-GB"> Google</a> & <a href="http://www.9lessons.info/2010/08/create-bitly-short-urls-using-jquery.htmlTech">9 lessons</a><br><br>
                        <strong>Nifty Bootstrap courtesy of</strong> <a href="http://www.layoutit.com/">Layoutit</a> & <a href="http://minikomi.github.io/Bootstrap-Form-Builder/">Minikomi</a> <br><br>Any comments to <a href="mailto:owen.bowden@gmail.com">Owen</a><br><br>
            </div>
    </div>
  </div>


            </div>
 
 
           
            <a href="https://github.com/owendb/GA-URL-Builder-Plus/fork">Download .zip</a> 
<br>
   <a href="https://github.com/owendb/GA-URL-Builder-Plus/fork">Fork on GitHub</a>


  </div>                                   
                                   
                                   
                                   
                                   
 
                                    <form class="form-horizontal" name="ctm" onsubmit="createURL(); return false;">
<fieldset>
 
<!-- Form Name -->
 
<!-- Text input-->
<h1><small>Step 1: Paste the URL below.</small></h1>
<div class="control-group">
  <label class="control-label" for="website">URL</label>
  <div class="controls">
    <input id="website" name="website" type="text" placeholder="E.G. http://www.example.com/campaign" class="input-xlarge" >
            <input name="utm_id" type="hidden" size="1" maxlength="1">
 
 
  </div>
</div>
<h1><small>Step 2: Fill out the details</small></h1>
<!-- Select Basic -->
 
<script type="text/javascript">
 
function changeSubcat(val)
{
  var utm_content = document.getElementById('utm_content');
  if (val == "general_enews" || val == "mm_enews" || val == "schools_enews")
  {
    utm_content.style.display = 'block';
  } else {
    utm_content.style.display = 'none';
  }
}
 
 
</script>
<div class="control-group">
  <label class="control-label" for="utm_source">Placement</label>
  <div class="controls">
    <select id="utm_source" name="utm_source" class="input-xlarge" onchange="setmedium(this.value); javascript: changeSubcat(this.options[this.selectedIndex].value);">
            <option>-</option>
            <optgroup label="Social">
            <option value="FacebookPost">Facebook Post</option>
            <option value="FacebookAd">Facebook Ad</option>
            <option value="twitter">Twitter</option>
            <option value="youtube">YouTube</option>
            <option value="pinterest">Pinterest</option>
            <option value="flickr">Flickr</option>
            <optgroup label="Email">
            <option value="email_signature">Email signature</option>
            <option value="general_enews">Monthly Enews</option>
            <option value="solus">Solus</option>
            <optgroup label="Display">
     	    <option value="skyscraper">Skyscraper</option>
     	    <option value="video">Video</option>
     	    <option value="banner">Banner</option>
     	    <option value="leaderboard">Leaderboard</option>
            <optgroup label="Outdoor">
     	<option value="poster">Poster</option>
	<option value="QRcode">QRcode</option>
    </select>
  </div>
</div>
 
 
 
<!-- Text input-->
 
 
<div style="display: none;" id="utm_content">
<div class="control-group" >
  <label class="control-label" for="utm_content">Edition</label>
  <div class="controls">
    <input  name="utm_content" type="text" placeholder="E.G. June2013" class="input-xlarge">
   
  </div>
</div>
</div>
<!-- Select Basic -->
<div class="control-group">
  <label class="control-label" for="utm_campaign">Campaign</label>
  <div class="controls">
    <select id="utm_campaign" name="utm_campaign" class="input-xlarge">
              <option>-</option>
              <option>London Marathon</option>
              <option>Research News</option>
              <option>Ice Bucket Challenge</option>
              <option>Our Great Campaign</option>
    </select>
  </div>
</div>
 
<!--Medium field: hidden and populated based on source-->
 
<input name="utm_medium" id="utm_medium"  type="hidden">
 
<!-- Text input-->
<div class="control-group">
  <label class="control-label" for="utm_term">Keywords</label>
  <div class="controls">
    <input id="utm_term" name="utm_term" type="text" placeholder="E.G. RedBanner+DayOutInSlough" class="input-xlarge" >
    <p class="help-block">Separate terms with a "+"</p>
  </div>
</div>
<h1><small>Step 3: Click the button</small></h1>
<!-- Button (Double) -->
<div class="control-group">
  <label class="control-label" for="Generate URL"></label>
  <div class="controls">
    <Input value="Generate URL" onclick="createURL();" type="button" class="btn btn-success">
    <input value="Clear" onClick="clearURL();" type="button" class="btn btn-danger">
  </div>
</div>
 
<!-- Text input-->
<div class="control-group">
  <label class="control-label" for="url">Tracked link</label>
  <div class="controls">
    <input id="url" name="url" type="text" placeholder="" class="input-xlarge">
   
  </div>
</div>
 
<!-- Button -->
<div class="control-group">
  <label class="control-label" for="singlebutton"></label>
  <div class="controls">
            <input type="button" id="short" value="Shorten with Bit.ly" class="btn btn-default" />
            <br>
    <div id="result"></div>
            <div id="su"></div>
  </div>
</div>
 
</fieldset>
</form>
<script language="javascript" type="text/javascript"> function createURL() { var form = document.ctm; var myurl = ""
if (!form){
return;
}
if (!form.website.value || form.website.value == "") { alert("Required Website Missing!"); form.website.focus(); return -1; } if((!form.utm_id.value || form.utm_id.value == "") && (!form.utm_source.value || form.utm_source.value == "") && (!form.utm_medium.value || form.utm_medium.value == "")) { alert("You're missing something!"); form.utm_id.focus(); return -1; } if (!form.utm_id.value || form.utm_id.value == "") { if (!form.utm_source.value || form.utm_source.value == "") { alert("Required Source Missing!"); form.utm_source.focus(); return -1; } if (!form.utm_medium.value || form.utm_medium.value == "") { alert("Required Medium Missing!"); form.utm_medium.focus(); return -1; } if (!form.utm_campaign.value || form.utm_campaign.value == "") { alert("Required Campaign Missing!"); form.utm_campaign.focus(); return -1; } if (!form.utm_term.value || form.utm_term.value == "") { alert("No keywords!"); form.utm_term.focus(); return -1; } } if (form.website.value && form.website.value != "") { if (form.website.value.indexOf("http") != 0) { form.website.value = "http://"+form.website.value; } if (form.website.value.indexOf("/",9) < 0 && form.website.value.indexOf("?") == -1 ) { form.website.value += "/"; } if (form.website.value.indexOf("/",9) > -1 && form.website.value.indexOf("?") == -1 ) { myurl += form.website.value+"?"; } else { myurl += form.website.value+"&"; } } if (form.utm_id.value && form.utm_id.value != "") { myurl += "utm_id="+removeSpaces(form.utm_id.value);
}
if (form.utm_source.value && form.utm_source.value != "") { if (form.utm_id.value && form.utm_id.value != "") myurl += "&"; myurl += "utm_source="+removeSpaces(form.utm_source.value);
}
if (form.utm_medium.value && form.utm_medium.value != "") { myurl += "&utm_medium="+removeSpaces(form.utm_medium.value);
}
if (form.utm_term.value && form.utm_term.value != "") { myurl +="&utm_term="+removeSpaces(form.utm_term.value);
}
if (form.utm_content.value && form.utm_content.value !="") { myurl +="&utm_content="+removeSpaces(form.utm_content.value);
}
if (form.utm_campaign.value && form.utm_campaign.value != "") { myurl += "&utm_campaign="+removeSpaces(form.utm_campaign.value);
}
form.url.value = myurl;
return 0;
}
function clearURL() {
var form = document.ctm;
if (!form){
return;
}
form.website.value = "";
form.utm_id.value = "";
form.utm_source.value = "";
form.utm_medium.value = "";
form.utm_campaign.value = "";
form.utm_content.value = "";
form.utm_term.value = "";
form.url.value = "";
return 0;
}
function removeSpaces(value) {
if(value.indexOf(' ')>0){
value = value.split(' ').join('+');
}
return encodeURIComponent(value);
}
</script>

            </div>
</div>
</body>
</html>
